analyze_topic_deeply:
  description: >
    주제 "{topic}"에 대한 포괄적이고 체계적인 분석을 수행하세요.
    
    **분석 범위:**
    1. **주제의 핵심 구성요소 파악**
       - 이 주제가 포함하는 주요 개념들과 하위 주제들
       - 실무에서 직면하는 구체적인 문제점들과 니즈
       - 대상 독자(직원, 관리자, HR 담당자 등)별로 필요한 정보
    
    2. **필수 전문분야 식별**
       - 법무/규정 관련 전문성 (근로기준법, 회사 정책 등)
       - 인사/조직관리 전문성 (HR 프로세스, 팀 관리 등)  
       - 실무/절차 전문성 (문서작성, 시스템 사용법 등)
       - 커뮤니케이션 전문성 (상사-부하 소통, 협업 등)
       - 기타 관련 분야 (재무, 기술, 의료 등)
    
    3. **섹션별 전문성 요구사항 정의**
       - 각 섹션에서 다뤄야 할 구체적인 내용 범위
       - 해당 섹션 작성에 필요한 지식과 경험의 유형
       - 실무적 관점 vs 이론적 관점의 균형점
       - 독자가 실제로 활용할 수 있는 실용적 정보의 수준
    
    4. **리포트 구조 설계 가이드라인**
       - 논리적 흐름: 기초 이해 → 실무 적용 → 고급 활용
       - 각 섹션 간 연관성과 의존 관계
       - 섹션별 적정 분량과 깊이 수준
               - 실무 예시와 사례 연구 포함 전략
  expected_output: >
    다음 구조로 구성된 상세한 주제 분석 보고서:
    
    **1. 주제 개요 및 범위**
    - "{topic}"의 정의와 핵심 구성요소
    - 다뤄야 할 주요 하위 주제들 (5-8개)
    - 대상 독자별 니즈 분석
    
    **2. 필수 전문분야 매핑**
    - 식별된 전문분야 목록 (우선순위별로 정렬)
    - 각 전문분야가 다뤄야 할 구체적 영역
    - 전문분야별 깊이 수준 (기초/중급/고급)
    
    **3. 섹션별 요구사항**
    - 권장 섹션 구조 (8-12개 섹션)
    - 각 섹션별 필요한 전문성 유형
    - 섹션별 핵심 다뤄야 할 포인트들
    - 실무 예시/사례 포함 권장사항
    
    **4. 리포트 설계 권장사항**
    - 전체적인 논리적 흐름
    - 섹션 간 연관성 및 의존관계
    - 독자 활용도를 높이기 위한 구성 요소
    
    분석 결과는 구체적이고 실무적이며, 다음 단계의 에이전트 매칭에 직접 활용 가능해야 함.
  agent: topic_specialist

create_toc_and_match_agents:
  description: >
    토픽 분석 결과를 바탕으로 "{topic}"에 대한 완전한 계획을 수립하세요.
    
    **1단계: 포괄적인 목차(TOC) 설계**
    - 주제를 다루기 위해 필요한 5-8개의 핵심 섹션 구성
    - 각 섹션은 논리적 순서로 배열 (서론 → 본론들 → 결론)
    - 섹션별로 다뤄야 할 구체적인 내용과 범위 명시
    - 독자가 이해하기 쉬운 흐름으로 구성
    
    **2단계: 에이전트 매칭 (매우 중요!)**
    사용 가능한 에이전트 목록: {available_agents}
    
    각 섹션별로 다음 기준을 적용하여 최적의 에이전트 선택:
    - **전문성 매칭**: 에이전트의 role/goal이 섹션 주제와 얼마나 관련있는지
    - **경험적 적합성**: 에이전트의 persona에서 해당 분야 경험/지식 확인
    - **작성 능력**: 해당 유형의 콘텐츠 작성에 적합한지 판단
    
    매칭 예시:
    - 법적 섹션 → 법무전문가 (변호사 경험, 법률 지식)
    - 기술적 섹션 → 웹개발전문가 또는 기술문서작가
    - 재무적 섹션 → 세무전문가 또는 금융전문가
    - 인사 관련 → 인사전문가 (HR 컨설턴트 경험)
    
    **3단계: 전문화된 Task 설계**
    매칭된 각 에이전트별로 다음을 포함한 task 작성:
    - 구체적이고 실행 가능한 작업 지시
    - 해당 섹션에서 다뤄야 할 핵심 포인트 명시
    - 에이전트의 전문성을 최대한 활용하는 접근법 제시
    - Markdown 형식 준수 및 구조화된 콘텐츠 요구
    - 실무적이고 실용적인 정보 포함 지시
  expected_output: >
    반드시 다음 형식의 JSON 배열을 정확히 출력하세요:
    [
      {
        "toc": {
          "title": "명확하고 구체적인 섹션 제목 (예: '휴가 정책 이해하기', '법적 요구사항 및 권리')",
          "description": "해당 섹션에서 다룰 구체적인 내용과 범위 (2-3문장으로 상세 설명)"
        },
        "agent": {
          "name": "available_agents에서 선택한 에이전트의 정확한 name",
          "role": "선택한 에이전트의 정확한 role",
          "goal": "선택한 에이전트의 정확한 goal", 
          "persona": "선택한 에이전트의 정확한 persona",
          "tool_names": "선택한 에이전트의 정확한 tool_names (배열 형태로)",
          "match_reason": "왜 이 에이전트가 이 섹션에 가장 적합한지 구체적인 이유 (전문성, 경험, 능력 기준으로 2-3문장)"
        },
        "task": {
          "description": "'{섹션제목}' 섹션을 위한 매우 구체적인 작업 지시. 반드시 포함할 내용: [구체적인 하위 주제들], 다뤄야 할 핵심 포인트, 에이전트의 전문성을 활용한 접근 방법, 실무적 예시나 사례 포함 지시. Markdown 형식(## 제목, ### 소제목, **강조**, - 리스트)으로 구조화하여 작성할 것.",
          "expected_output": "Markdown 형식의 전문적이고 실용적인 섹션 내용 (2000-3000단어). ## 주제명, ### 하위주제, **핵심용어 강조**, - 항목별 리스트, 실무 예시와 구체적 가이드라인 포함. 독자가 바로 활용할 수 있는 수준의 디테일한 정보 제공."
        }
      }
    ]
    
    **중요 지침:**
    - 반드시 5-7개의 섹션으로 구성
    - 각 섹션마다 가장 적합한 에이전트를 중복 없이 배정
    - 논리적 순서: 서론 → 정책/이해 → 실무/작성 → 법적측면 → 커뮤니케이션 → 조직관점 → 결론
    - JSON 형식을 정확히 준수 (쉼표, 따옴표, 대괄호 확인)
    - 한국어로 작성하되 전문 용어는 적절히 사용
  agent: agent_toc_matcher 